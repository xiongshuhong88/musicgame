:root{--bg-color: #1a1510;--terminal-green: #38b44a;--retro-gold: #c5a45b;--crt-flicker: rgba(18, 16, 16, .1);--player-size: 48px;--player-speed: 4px}*{box-sizing:border-box;-webkit-user-select:none;user-select:none}body{margin:0;padding:0;background-color:#000;font-family:Courier New,Courier,monospace;overflow:hidden;color:#fff;height:100vh;display:flex;justify-content:center;align-items:center}#app{width:100%;aspect-ratio:16 / 9;max-height:100vh;margin:auto;position:relative;background:var(--bg-color);overflow:hidden;box-shadow:0 0 50px #000c}.crt-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,#12101000 50%,#0009);pointer-events:none;z-index:100}.scanline{width:100%;height:100%;z-index:101;background:linear-gradient(0deg,#0000 50%,#0000001a 50%),linear-gradient(90deg,#ff00000f,#00ff0005,#0000ff0f);background-size:100% 3px,3px 100%;position:absolute;top:0;left:0;pointer-events:none;animation:flicker .15s infinite}@keyframes flicker{0%{opacity:.95}to{opacity:1}}#game-container{width:100%;height:100%;position:relative}#scene-layer{width:100%;height:100%;position:absolute;top:0;left:0;display:block;background:url(/lobby-bg.jpg) no-repeat center center;background-size:100% 100%;perspective:1000px}.character{width:40px;height:48px;position:absolute;z-index:50;transition:none;image-rendering:pixelated;background:transparent;overflow:visible;filter:drop-shadow(0 5px 5px rgba(0,0,0,.5))}.character:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;background-image:linear-gradient(#f00 0,#f00 12px,transparent 12px),linear-gradient(to right,#feb 10px,transparent 10px,transparent 30px,#feb 30px),linear-gradient(#feb 12px,#feb 24px,transparent 24px),linear-gradient(#f00 24px,#f00 34px,transparent 34px),linear-gradient(#00f 34px,#00f 48px,transparent 48px)}.character{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 16'%3E%3Cpath fill='%23d32' d='M3 0h5v1H3zM2 1h7v1H2z'/%3E%3Cpath fill='%23fb0' d='M2 2h6v1H2zM1 3h1v1H1zM3 3h1v1H3zM7 3h2v1H7zM1 4h3v1H1zM5 4h4v1H5z'/%3E%3Cpath fill='%23d32' d='M4 5h4v1H4zM3 6h6v1H3zM2 7h8v1H2z'/%3E%3Cpath fill='%2323d' d='M3 8h6v1H3zM2 9h2v1H2zM5 9h2v1H5zM8 9h2v1H8zM1 10h4v1H1zM7 10h4v1H7zM0 11h4v1H0zM8 11h4v1H8z'/%3E%3Cpath fill='%2323d' d='M2 12h8v2H2zM1 14h3v2H1zM8 14h3v2H8z'/%3E%3C/svg%3E");background-size:contain;background-repeat:no-repeat;width:48px;height:64px}.character:before,.character:after{content:none}.walking{animation:hop .2s infinite alternate}@keyframes hop{0%{transform:translateY(0)}to{transform:translateY(-5px)}}.door{position:absolute;width:140px;height:220px;background:transparent;border:none;display:flex;justify-content:center;align-items:center;cursor:pointer;transform-style:preserve-3d;transition:all .3s}#scene-layer video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center 40%;transform:none;z-index:10}#input-panel{position:absolute;bottom:80px;left:50%;transform:translate(-50%);background:#000000d9;padding:20px 40px;border:2px solid #c5a45b;display:flex;flex-direction:column;gap:15px;box-shadow:0 10px 30px #000000e6;z-index:200}.door:after{content:none}.door:before{content:none}.door .plate{position:absolute;top:-30px;background:#c5a45b;color:#2b0b0b;width:40px;height:40px;line-height:40px;padding:0;font-weight:700;font-family:Times New Roman,serif;font-size:24px;border:2px solid #fff;border-radius:50%;box-shadow:0 5px 10px #00000080;text-align:center}.door.open{transform:scale(.9);opacity:0;transition:opacity .5s,transform .5s}#start-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;z-index:90;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;pointer-events:auto}.title{font-size:64px;color:var(--retro-gold);text-shadow:4px 4px 0 #8e7354;margin-bottom:10px}.subtitle{color:var(--terminal-green);letter-spacing:5px;margin-bottom:50px}.retro-btn.large{font-size:24px;padding:15px 40px;border:4px solid var(--retro-gold)}.blink{animation:blink 1s infinite}@keyframes blink{0%,to{opacity:1}50%{opacity:.5}}#rhythm-hud{position:absolute;top:20px;right:20px;text-align:right;z-index:100;font-family:Courier New,monospace;text-shadow:2px 2px 0 #000}.score-container{font-size:24px;color:#fceabb}.combo-container{font-size:32px;color:#ff00de;font-weight:700;margin-top:5px}#rhythm-message{font-size:40px;color:#fff;opacity:0;transform:scale(.5);transition:all .1s;min-height:50px}#rhythm-message.pop{opacity:1;transform:scale(1.2)}.note{position:absolute;width:40px;height:40px;background:url(/disk.png);background-color:#0ff;border-radius:50%;box-shadow:0 0 10px #0ff;z-index:50;text-align:center;line-height:40px;font-size:20px}.note.style-1{background-color:#f0f;box-shadow:0 0 10px #f0f}.note.style-2{background-color:#ff0;box-shadow:0 0 10px #ff0}.hit-effect{position:absolute;width:100px;height:100px;border:2px solid #fff;border-radius:50%;animation:ripple .5s ease-out forwards;pointer-events:none;z-index:60}@keyframes ripple{0%{transform:scale(.5);opacity:1}to{transform:scale(2);opacity:0}}.note.mushroom{background-color:#e50914;box-shadow:0 0 15px #e50914;border:2px solid white}.note.star{background-color:gold;box-shadow:0 0 20px gold;animation:spin 1s infinite linear}@keyframes spin{to{transform:rotate(360deg)}}.note.bomb{background-color:#333;box-shadow:0 0 10px red;border:2px solid #f00;animation:pulse-red .5s infinite}.note.coin{background-color:gold;border:2px solid #eda002;box-shadow:0 0 10px gold}.note.ice{background-color:#a0eaff;box-shadow:0 0 15px #a0eaff;border:2px solid #fff;opacity:.9}@keyframes pulse-red{0%{transform:scale(1)}50%{transform:scale(1.1);box-shadow:0 0 20px red}to{transform:scale(1)}}.shake{animation:shake .5s cubic-bezier(.36,.07,.19,.97) both}@keyframes shake{10%,90%{transform:translate3d(-4px,0,0)}20%,80%{transform:translate3d(8px,0,0)}30%,50%,70%{transform:translate3d(-16px,0,0)}40%,60%{transform:translate3d(16px,0,0)}}#player.big{transform:scale(1.5)!important;filter:drop-shadow(0 0 10px rgba(255,255,255,.8));transition:transform .2s}#player.star{animation:rainbow .5s linear infinite}@keyframes rainbow{0%{filter:hue-rotate(0deg) brightness(1.5)}to{filter:hue-rotate(360deg) brightness(1.5)}}#controls-hint{position:absolute;bottom:30px;right:30px;width:auto;text-align:right;color:#ffffffb3;font-family:Courier New,monospace;font-size:14px;pointer-events:none;z-index:20;text-shadow:1px 1px 2px #000;background:#00000080;padding:10px;border-radius:4px;border-right:3px solid #c5a45b}#ui-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:20}#input-panel{position:absolute;bottom:50px;left:50%;transform:translate(-50%);background:#000000d9;padding:20px;border:2px solid var(--retro-gold);display:flex;flex-direction:column;gap:10px;pointer-events:auto}input{background:transparent;border:none;border-bottom:2px solid #666;color:var(--retro-gold);font-family:inherit;font-size:20px;padding:5px;text-align:center;outline:none}input:focus{border-bottom-color:var(--retro-gold)}.button-group{display:flex;justify-content:center;gap:10px}.retro-btn{background:var(--retro-gold);color:#000;border:none;padding:8px 16px;font-family:inherit;font-weight:700;cursor:pointer;box-shadow:3px 3px #4a3b2a}.retro-btn:active{transform:translate(2px,2px);box-shadow:1px 1px #4a3b2a}.retro-btn.secondary{background:#888}.retro-btn.danger{background:#b43838;color:#fff}.hidden{display:none!important}#transition-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:50}.disk-spinner{width:100px;height:100px;border:10px solid #333;border-top:10px solid var(--retro-gold);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text{margin-top:20px;color:var(--retro-gold);font-size:18px;letter-spacing:2px}.settlement-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--retro-gold);text-align:center;animation:fadeIn 1s ease-in}.settlement-screen h1{font-size:48px;text-shadow:4px 4px 0 #552;margin-bottom:20px}.final-score{font-size:36px;margin:20px 0;color:var(--terminal-green);text-shadow:0 0 10px var(--terminal-green)}.stats{font-size:24px;color:#ccc;margin-bottom:40px}@keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
